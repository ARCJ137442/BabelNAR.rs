//! å®šä¹‰æœ‰å…³ã€Œå‘½ä»¤è¡Œè™šæ‹Ÿæœºã€çš„æŠ½è±¡API

use navm::{cmd::Cmd, output::Output};

/// [`Cmd`]â†’è¿›ç¨‹è¾“å…¥ è½¬è¯‘å™¨
/// * ğŸš©ç°åœ¨ä¸å†ä½¿ç”¨ç‰¹å¾ï¼Œä»¥ä¾¿åœ¨`Option<Box<InputTranslator>>`ä¸­æ¨æ–­ç±»å‹
///   * ğŸ“è‹¥ç»™ä¸Šè¾¹ç±»å‹ä¼ å…¥å€¼`None`ï¼Œç¼–è¯‘å™¨æ— æ³•è‡ªåŠ¨æ¨å¯¼åˆé€‚çš„ç±»å‹
/// * ğŸ“Œè¦æ±‚çº¿ç¨‹ç¨³å®š
///   * åªæœ‰è½¬è¯‘åŠŸèƒ½ï¼Œæ²¡æœ‰å…¶å®ƒæ¶‰åŠå¤–éƒ¨çš„æ“ä½œï¼ˆçº¯å‡½æ•°ï¼‰
/// TODO: åœ¨åç»­çš„ã€ŒNSEæŒ‡ä»¤è¾“å…¥ã€æ—¶ï¼Œéœ€è¦é€šè¿‡ã€Œè‡ªåŠ¨å°†ã€ç©ºé¢„ç®—ä»»åŠ¡ã€ä½œä¸ºè¯­å¥è¾“å…¥ã€åº”å¯¹ã€Œ`$$ A.`â†’`A.`ã€çš„æƒ…å†µ
/// * âš ï¸è½¬è¯‘æœ‰å¯èƒ½å¤±è´¥ï¼šæ­¤æ—¶è¿”å›å¹¶ä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯
pub type InputTranslator = dyn Fn(Cmd) -> Result<String, String> + Send + Sync;

/// è¿›ç¨‹è¾“å‡ºâ†’[`Output`]è½¬è¯‘å™¨
/// * ğŸš©ç°åœ¨ä¸å†ä½¿ç”¨ç‰¹å¾ï¼Œä»¥ä¾¿åœ¨`Option<Box<OutputTranslator>>`ä¸­æ¨æ–­ç±»å‹
///   * ğŸ“è‹¥ç»™ä¸Šè¾¹ç±»å‹ä¼ å…¥å€¼`None`ï¼Œç¼–è¯‘å™¨æ— æ³•è‡ªåŠ¨æ¨å¯¼åˆé€‚çš„ç±»å‹
/// * ğŸ“Œè¦æ±‚çº¿ç¨‹ç¨³å®š
///   * åªæœ‰è½¬è¯‘åŠŸèƒ½ï¼Œæ²¡æœ‰å…¶å®ƒæ¶‰åŠå¤–éƒ¨çš„æ“ä½œï¼ˆçº¯å‡½æ•°ï¼‰
pub type OutputTranslator = dyn Fn(String) -> Result<Output, String> + Send + Sync;
